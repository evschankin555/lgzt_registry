# Руководство по управлению админами и волонтёрами

## 1. Добавление админа

### Шаг 1: Получить Telegram ID пользователя

**Вариант А: Пользователь уже зарегистрирован в боте**

```bash
python check_user.py <ID_пользователя>
```

Пример:
```bash
python check_user.py 10
```

**Вариант Б: Пользователь НЕ зарегистрирован**

1. Попросите пользователя написать боту `/start` и пройти регистрацию
2. После регистрации снова запустите `python check_user.py 10`
3. Скопируйте Telegram ID из вывода

**Вариант В: Узнать свой Telegram ID**

Напишите боту [@userinfobot](https://t.me/userinfobot) - он покажет ваш ID.

### Шаг 2: Добавить Telegram ID в список админов

1. Откройте файл `vars.py`
2. Найдите строку:
   ```python
   admin_ids = [9958633101, 2693757140, 1632759029]
   ```
3. Добавьте Telegram ID в список:
   ```python
   admin_ids = [9958633101, 2693757140, 1632759029, ВАШ_TELEGRAM_ID]
   ```
4. Сохраните файл

### Шаг 3: Перезапустить бота

**На сервере (через systemd):**
```bash
sudo systemctl restart lgzt_registry-bot
```

**Локально:**
- Остановите бота (Ctrl+C)
- Запустите снова: `python main.py`

### Шаг 4: Проверка

Напишите боту `/start` - вы должны увидеть меню админа.

---

## 2. Удаление регистрации пользователя

### Через Dashboard (веб-интерфейс)

1. Откройте https://lgzt.developing-site.ru (или локально http://localhost:3112)
2. Войдите с паролем
3. Найдите пользователя
4. Нажмите кнопку "Удалить"

### Через API (скрипт)

```bash
python delete_user.py <ID_пользователя>
```

Пример:
```bash
python delete_user.py 10
```

---

## 3. Добавление волонтёра

### Вариант 1: Через бота (рекомендуется)

1. Напишите боту `/start`
2. В админ-меню выберите "Добавить волонтёра +"
3. Введите Telegram ID волонтёра
4. Введите имя волонтёра

### Вариант 2: Напрямую в БД (для разработчиков)

```bash
python add_volunteer.py <TELEGRAM_ID> "<Имя>"
```

Пример:
```bash
python add_volunteer.py 123456789 "Иван Иванов"
```

---

## 4. Текущие админы

Проверить список админов:
```bash
grep "admin_ids" vars.py
```

Текущие админы:
- `9958633101`
- `2693757140`
- `1632759029`

---

## 5. Registry Dashboard

**URL (продакшн):** https://lgzt.developing-site.ru
**URL (локально):** http://localhost:3112
**Пароль:** (см. в .env файле)

**Что можно делать:**
- Просматривать всех пользователей
- Удалять пользователей
- Менять компанию пользователя
- Просматривать и удалять волонтёров
- Экспортировать в Excel

---

## 6. Частые вопросы

**Q: Где хранятся админы?**
A: В файле `vars.py` в списке `admin_ids`

**Q: Где хранятся волонтёры?**
A: В базе данных (таблица `user_volunteer`)

**Q: Как узнать Telegram ID?**
A:
1. Зарегистрироваться в боте → `python check_user.py <ID>`
2. Написать боту @userinfobot
3. Использовать Telegram API

**Q: Разница между админом и волонтёром?**
A:
- **Админ** - полный доступ к управлению (статистика, экспорт, удаление)
- **Волонтёр** - может регистрировать других людей через бота

**Q: Можно ли добавить админа без регистрации в боте?**
A: Да, если знаете его Telegram ID (через @userinfobot)

---

## 7. Полезные команды

```bash
# Проверить пользователя
python check_user.py 10

# Удалить регистрацию
python delete_user.py 10

# Добавить волонтёра
python add_volunteer.py 123456789 "Имя"

# Посмотреть список админов
grep "admin_ids" vars.py

# Перезапустить бота (на сервере)
sudo systemctl restart lgzt_registry-bot

# Посмотреть логи бота (на сервере)
sudo journalctl -u lgzt_registry-bot -f
```
